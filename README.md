ğŸµ Music Streaming App

Dá»± Ã¡n website nghe nháº¡c trá»±c tuyáº¿n Ä‘Æ°á»£c xÃ¢y dá»±ng báº±ng Next.js, Tailwind CSS vÃ  Supabase.

ğŸš€ 1. YÃªu cáº§u mÃ´i trÆ°á»ng

TrÆ°á»›c khi báº¯t Ä‘áº§u, hÃ£y Ä‘áº£m báº£o mÃ¡y tÃ­nh cá»§a báº¡n Ä‘Ã£ cÃ i Ä‘áº·t:

Node.js: PhiÃªn báº£n 18.0 trá»Ÿ lÃªn (Táº£i táº¡i nodejs.org).

Git: Äá»ƒ quáº£n lÃ½ mÃ£ nguá»“n.

VS Code: TrÃ¬nh soáº¡n tháº£o code khuyÃªn dÃ¹ng.

ğŸ› ï¸ 2. CÃ i Ä‘áº·t dá»± Ã¡n

BÆ°á»›c 1: Clone dá»± Ã¡n vá» mÃ¡y

Má»Ÿ Terminal vÃ  cháº¡y lá»‡nh:

git clone <link-github-cua-ban>
cd music-streaming-app


BÆ°á»›c 2: CÃ i Ä‘áº·t cÃ¡c thÆ° viá»‡n (Dependencies)

Cháº¡y lá»‡nh sau Ä‘á»ƒ táº£i cÃ¡c gÃ³i cáº§n thiáº¿t (Next.js, Supabase, Tailwind, Icons...):

npm install


ğŸ—„ï¸ 3. Cáº¥u hÃ¬nh Database (Supabase) - DÃ nh cho Leader/NgÆ°á»i táº¡o dá»± Ã¡n

Dá»± Ã¡n nÃ y sá»­ dá»¥ng Supabase lÃ m Backend (Auth + Database + Storage). Báº¡n cáº§n táº¡o má»™t dá»± Ã¡n miá»…n phÃ­ táº¡i supabase.com.

BÆ°á»›c 1: Láº¥y API Key

VÃ o Project Settings -> API.

Copy Project URL vÃ  anon public key.

BÆ°á»›c 2: Táº¡o file biáº¿n mÃ´i trÆ°á»ng

Táº¡i thÆ° má»¥c gá»‘c dá»± Ã¡n, táº¡o file .env.local.

DÃ¡n ná»™i dung sau vÃ o:

NEXT_PUBLIC_SUPABASE_URL=your_project_url_here
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key_here


(Thay tháº¿ your_... báº±ng key báº¡n vá»«a copy).

BÆ°á»›c 3: Cháº¡y lá»‡nh SQL táº¡o báº£ng

VÃ o Supabase Dashboard -> SQL Editor -> Copy vÃ  cháº¡y Ä‘oáº¡n lá»‡nh sau Ä‘á»ƒ táº¡o toÃ n bá»™ cáº¥u trÃºc Database:

-- 1. Báº¢NG PROFILES (NgÆ°á»i dÃ¹ng & Admin)
create table public.profiles (
  id uuid references auth.users on delete cascade primary key,
  full_name text,
  avatar_url text,
  phone text,
  role text default 'user' check (role in ('user', 'admin')),
  created_at timestamptz default now(),
  updated_at timestamptz default now()
);
alter table public.profiles enable row level security;

-- 2. TRIGGER Tá»° Äá»˜NG Táº O USER
create or replace function public.handle_new_user() returns trigger as $$
begin
  insert into public.profiles (id, full_name, avatar_url, role)
  values (
    new.id,
    new.raw_user_meta_data->>'full_name',
    new.raw_user_meta_data->>'avatar_url',
    COALESCE(new.raw_user_meta_data->>'role', 'user')
  );
  return new;
end;
$$ language plpgsql security definer;
create trigger on_auth_user_created after insert on auth.users for each row execute procedure public.handle_new_user();

-- 3. Báº¢NG Dá»® LIá»†U NHáº C (Demo)
create table public.songs (
  id bigint generated by default as identity primary key,
  title text not null,
  song_url text not null,
  image_url text,
  author text,
  user_id uuid references auth.users(id),
  created_at timestamptz default now()
);
alter table public.songs enable row level security;

-- 4. POLICIES (Quyá»n truy cáº­p)
-- Cho phÃ©p má»i ngÆ°á»i xem profile, bÃ i hÃ¡t
create policy "Public Read Profiles" on public.profiles for select using (true);
create policy "Public Read Songs" on public.songs for select using (true);

-- Cho phÃ©p User tá»± sá»­a Profile cá»§a mÃ¬nh (Update & Insert cho lá»‡nh Upsert)
create policy "Users can update own profile" on public.profiles for update using (auth.uid() = id);
create policy "Users can insert own profile" on public.profiles for insert with check (auth.uid() = id);

-- 5. STORAGE (LÆ°u áº£nh & nháº¡c)
insert into storage.buckets (id, name, public) values ('images', 'images', true);
insert into storage.buckets (id, name, public) values ('songs', 'songs', true);

create policy "Public Access Images" on storage.objects for select using (bucket_id = 'images');
create policy "Auth Upload Images" on storage.objects for insert with check (bucket_id = 'images' and auth.role() = 'authenticated');


BÆ°á»›c 4: Cáº¥u hÃ¬nh URL (Äá»ƒ Reset Password)

VÃ o Authentication -> URL Configuration.

Site URL: http://localhost:3000

Redirect URLs (ThÃªm má»›i): http://localhost:3000/update-password

â–¶ï¸ 4. Cháº¡y dá»± Ã¡n

Sau khi cáº¥u hÃ¬nh xong, cháº¡y lá»‡nh sau Ä‘á»ƒ khá»Ÿi Ä‘á»™ng Web:

npm run dev


Truy cáº­p: http://localhost:3000

ğŸ”‘ 5. HÆ°á»›ng dáº«n sá»­ dá»¥ng

ÄÄƒng kÃ½ tÃ i khoáº£n Admin

Máº·c Ä‘á»‹nh Ä‘Äƒng kÃ½ sáº½ lÃ  tÃ i khoáº£n User. Äá»ƒ táº¡o tÃ i khoáº£n Admin:

Báº¥m nÃºt ÄÄƒng kÃ½.

Nháº­p Email & Máº­t kháº©u.

Nháº­p mÃ£ bÃ­ máº­t vÃ o Ã´ "MÃ£ giá»›i thiá»‡u Admin": ADMIN123 (Ä‘Ã£ cáº¥u hÃ¬nh trong code).

Sau khi Ä‘Äƒng kÃ½, báº¡n sáº½ tháº¥y menu Admin Dashboard khi báº¥m vÃ o Avatar.

Cáº­p nháº­t há»“ sÆ¡

ÄÄƒng nháº­p.

Báº¥m vÃ o Avatar gÃ³c pháº£i -> Chá»n Há»“ sÆ¡ cÃ¡ nhÃ¢n.

Báº¥m icon CÃ¢y bÃºt chÃ¬ Ä‘á»ƒ sá»­a.

Nháº¥n vÃ o hÃ¬nh trÃ²n Avatar Ä‘á»ƒ upload áº£nh má»›i.

ğŸ¤ 6. HÆ°á»›ng dáº«n cho thÃ nh viÃªn nhÃ³m (Teamwork)

Náº¿u báº¡n lÃ  thÃ nh viÃªn Ä‘Æ°á»£c má»i vÃ o dá»± Ã¡n (khÃ´ng pháº£i ngÆ°á»i táº¡o Database), hÃ£y lÃ m theo cÃ¡c bÆ°á»›c sau:

Cháº¥p nháº­n lá»i má»i: Kiá»ƒm tra email Ä‘á»ƒ vÃ o Team trÃªn Supabase Dashboard.

Láº¥y file mÃ´i trÆ°á»ng: Xin file .env.local tá»« Leader (ngÆ°á»i táº¡o dá»± Ã¡n) vÃ  lÆ°u vÃ o mÃ¡y cá»§a báº¡n.

LÆ°u Ã½: Tuyá»‡t Ä‘á»‘i khÃ´ng tá»± táº¡o Database má»›i. Má»i ngÆ°á»i dÃ¹ng chung 1 Database Ä‘á»ƒ dá»¯ liá»‡u Ä‘á»“ng bá»™.

Cháº¡y dá»± Ã¡n:

Clone code vá» mÃ¡y: git clone ...

CÃ i thÆ° viá»‡n: npm install

Cháº¡y web: npm run dev

Tuyá»‡t Ä‘á»‘i KHÃ”NG:

KhÃ´ng cháº¡y láº¡i cÃ¡c lá»‡nh SQL táº¡o báº£ng (vÃ¬ báº£ng Ä‘Ã£ cÃ³ rá»“i).

KhÃ´ng xÃ³a Project trÃªn Supabase.

ğŸ“¦ CÃ´ng nghá»‡ sá»­ dá»¥ng

Frontend: Next.js 14 (App Router), React Hooks.

Styling: Tailwind CSS.

Backend: Supabase (PostgreSQL, Auth, Storage).

Icons: Lucide React.

State Management: React Context API.